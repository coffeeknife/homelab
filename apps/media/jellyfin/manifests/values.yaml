persistence:
  config:
    pvc:
      enabled: true
      claimName: jellyfin-config
  media:
    readOnly: true
    nfs:
      server: 192.168.1.69
      path: "/mnt/birdpool/jellyfin/media"
  cache:
    emptyDir:
      sizeLimit: 10Gi

nodeSelector:
  gpu: amd

# GPU passthrough for VAAPI hardware transcoding
# Note: Volume mounts are handled via postRenderers in helmrelease.yaml
# because the wrenix chart doesn't support extraVolumes
securityContext:
  supplementalGroups:
    - 44  # video group
    - 110 # render group

ingress:
  enabled: true
  className: traefik
  annotations:
    cert-manager.io/cluster-issuer: cert-issuer
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    gethomepage.dev/enabled: "true"
    gethomepage.dev/name: "Jellyfin"
    gethomepage.dev/group: "Media"
    gethomepage.dev/icon: "jellyfin"
    gethomepage.dev/description: "Media streaming"
    gethomepage.dev/href: "https://stream.wrenspace.dev"
    gethomepage.dev/weight: "20"
  hosts:
    - host: stream.wrenspace.dev
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: jellyfin-tls
      hosts:
        - stream.wrenspace.dev